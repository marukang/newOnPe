eBookCore.plugins.slideshow={speed:4,dtr:!0,played:!1,close:function(){},control:function(e){},run:function(e,o,s){}},eBookCore.plugins.slideshow.close=function(){eBookCore.plugins.slideshow.control("stop"),$("#ebookslideshow").detach()},eBookCore.plugins.slideshow.control=function(e){"switch"===e&&(e=eBookCore.plugins.slideshow.played?"stop":"play"),eBookCore.plugins.slideshow.played="play"===e,eBookCore.plugins.slideshow.played?$.doTimeout("slideshowplay",1e3*eBookCore.plugins.slideshow.speed,function(){return eBookCore.plugins.slideshow.dtr?eBookCore.func.gotoNext():eBookCore.func.gotoPrev(),!0}):$.doTimeout("slideshowplay")},eBookCore.plugins.slideshow.run=function(o,e,s){if(0<$("#ebookslideshow").length)return eBookCore.plugins.slideshow.close();var i=$("<div id='ebookslideshow' />");i.append("<div class='dragarea'/>");var n=$("<div class='slideshow_up'/>"),l=$("<div class='slideshow_down'/>");i.append(n),i.append(l),n.append("<input type='image' id='slideBtnPlay'\t\t\t\tsrc='"+o+"pause.png'\t/>"),n.append("<input type='image' id='slideBtnDirection'\tsrc='"+o+"right.png'\t/>"),n.append("<span id='slideBtnClose' tabindex='0'>âœ•</span>"),l.append("<span id='slideshowSpeedNum' />"),l.append("<div id='slideshowDelayBar' tabindex='0' />"),l.append("<span id='slideCurrentPageNum' class='pagenum' />"),l.append("<span id='slideTotalPageNum' />"),i.appendTo(document.body),i.focus(),i.draggable({handle:"span, .dragarea"}),$("#slideCurrentPageNum").text(e),$("#slideTotalPageNum").text(" / "+s),$("#slideshowSpeedNum").text(eBookCore.plugins.slideshow.speed+"sec"),$("#slideshowDelayBar").slider({orientation:"horizontal",range:"min",min:1,max:120,value:eBookCore.plugins.slideshow.speed,animate:!0,slide:function(e,o){$("#slideshowSpeedNum").text((eBookCore.plugins.slideshow.speed=o.value)+"sec"),eBookCore.plugins.slideshow.control("play")}}),$("#slideBtnPlay").on(eBookCore.eventType.keyclick,function(e){eBookCore.eventType.isExcute(e)&&(eBookCore.plugins.slideshow.control("switch"),$(e.target).attr("src",o+(eBookCore.plugins.slideshow.played?"pause.png":"play.png")))}),$("#slideBtnDirection").on(eBookCore.eventType.keyclick,function(e){eBookCore.eventType.isExcute(e)&&(eBookCore.plugins.slideshow.dtr=!eBookCore.plugins.slideshow.dtr,$(e.target).attr("src",o+(eBookCore.plugins.slideshow.dtr?"right.png":"left.png")))}),$("#slideBtnClose").on(eBookCore.eventType.click,function(e){eBookCore.eventType.isExcute(e)&&eBookCore.plugins.slideshow.close()}),i.mouseenter(function(){i.doTimeout("fade"),i.animate({opacity:1})}).mouseleave(function(){i.doTimeout("fade",2e3,function(){i.animate({opacity:.2})})}),eBookCore.plugins.slideshow.control("play")};